\chapter{Aprovisionamiento de recursos virtuales}
\label{aprmaqvir}
La computaci'on en la nube ha sido un punto importante de investigaci'on en la industria recientemente. Esta puede ser descrita como una nueva clase de computaci'on en la cual din'amicos y escalables recursos pueden ser provistos sobre internet. Para los usuarios esto es transparente y ellos solo pagan lo que usan de acuerdo a niveles de servicio establecidos con los proveedores de nubes.\\
\\
Una de las principales caracter'isticas de la computaci'on en la nube es la virtualizaci'on, la cual consiste en crear una versi'on virtual de un recurso tecnologico en lugar de usar una versi'on f'isica. La virtualizaci'on se puede aplicar a computadoras, sistemas operativos, dispositivos de almacenamiento de informaci'on, aplicaciones o redes permitiendo que las empresas ejecuten m'as de un sistema virtual, adem'as de m'ultipls sistemas operativos y aplicaciones, en un 'unico servidor, de esta manera se logra econom'ia de escala y una mayor eficiencia.\\
\\
En la actualidad predominan dos tecnicas de virtualizacion, la primera tecnica se denomina virtualizaci'on de hardware y consiste en crear un hardware sint'etico el cual usan las maquinas virtuales como propio, la idea es virtualizar el sistema operativo completo el cual se ejecuta sobre un software llamado el hipervisor, su funci'on es interactuar directamente con la CPU en el servidor f'isico, ofreciendo a cada uno de los servidores virtuales una total autonom'ia e independencia. Incluso pueden coexistir en una misma m'aquina distintos servidores virtuales funcionando con distintos sistemas operativos. Esta tecnica es la mas desarrollada y hay diferentes clases que cada fabricante ha ido desarrollando y adaptando, como por ejemplo Xen, KVM, VMWare y VirtualBox.\\
\\
La segunda tecnica es conocida como virtualizaci'on del sistema operativo. En esta t'ecnica lo que se virtualiza es el sistema operativo completo el cual corre directamente virtual sobre la m'aquina f'isica. En esta t'ecnica las maquinas virtuales son llamadas contenedores, los cuales acceden por igual a todos los recursos del sistema. La ventaja es a su vez una desventaja: Todas las maquinas virtuales usan el mismo Kernel que el sistema operativo lo que reduce mucho los errores y multiplica el rendimiento, pero a su vez solo puede haber un mismo tipo de sistema operativo en los contenedores, no se puede mezclar Windows-Linux-Etc. Este sistema, tambi'en se acerca mucho a lo que seria una virtualizaci'on nativa.\\
\\
Sin importar la tecnica de virtualizaci'on que se use, la instalaci'on de una maquina virtual (o de un contenedor) requiere normalmente de la generaci'on e instalaci'on de una imagen y la instalaci'on y configuraci'on de paquetes de software. Estas tareas generalmente son realizadas por t'ecnicos de los proveedores de la nube. Cuando un usuario de la nube solicita un nuevo servicio o mas capacidad de computo, el administrador selecciona la apropiada imagen para clonar e instalar en los nodos de la nube. Si no hay una imagen apropiada para los requerimientos del cliente se crea y configura una nueva que cumpla con la solicitud. Esta creaci'on de una nueva imagen puede ser realizada modificando la imagen mas cercada de las ya existentes. En el momento de la creaci'on optima de la imagen un administrador puede tener dificultades y pregunt'as como, cual es la mejor configuraci'on?, cuales paquetes y sus dependencias deber'ian ser instaladas? y como encontrar una imagen que mejor llene las expectativas?.\\
\\
Es por esta raz'on que los proveedores de la nube desean cada vez mas automatizar y simplificar este proceso porque la dependencia entre paquetes de software y la dificultad de mantenimiento agrega tiempo a la creaci'on de las maquinas virtuales. En otras palabras los proveedores de nube quieren dar mas flexibilidad y agilidad a la hora de satisfacer los requerimientos de los usuarios finales.\\
\\
Existen varias soluciones que permiten la interacci'on con los diferentes ambientes de virtualizaci'on. Estas soluciones usan diferentes enfoques para realizar despliegues de software en las maquinas virtuales,  que dan un r'apido, controlado y autom'atico despliegue de software, en todas las maquinas de una red f'isicas o virtualizadas, permitiendo mejorar los tiempos de instalaci'on de nuevas funcionalidades de forma confiable y segura de la misma forma que ayudan a disminuir el tiempo y el costo de los despliegues de aplicaciones y servicios. Sin embargo no todas las soluciones son de codigo abierto, algunas son de desarrollo propietario, en donde solo ofrecen el API al p'ublico pero no el c'odigo de la soluci'on como tal y manejan sus propias herramientas de virtualizaci'on.

\section{Alternativas de despliegue actuales}
En esta secci'on, se describir'an las herramientas mas significativas que existen indicando las ventajas y desventajas de cada una.

\subsection{Nixes}
Nixes es una herramienta usada para instalar, mantener, controlar y monitorear aplicaciones en PlanetLab \cite{1}. Nixes consiste de un conjunto de scripts bash, un archivo de configuracion, y un respositorio web, y puede automaticamente resolver las dependencias de paquetes RPM.\\
\\
Para sistemas de peque'na escala, Nixes es f'acil de usar: los usuarios simplement e crean el archivo de configuraci'on para cada aplicaci'on y modifican los scripts a desplegar en los nodos. Pero para grandes y complejos sistemas, Nixes no es efectivo, porque el no provee un mecanismo autom'atico de flujo de trabajo.

\subsection{SmartFrog}
SmartFrog (SF) es un framework para servicios de configuraci'on, descripci'on, despliegue y administraci'on del ciclo de vida. Consiste de un lenguaje declarativo, un motor que corre en los nodos remotos y ejecuta plantillas escritas en el lenguaje de SF y un modelo de componentes \cite{3}. El lenguaje SF soporta encapsularon (que es similar a las clases de python), herencia y composici'on que permite personalizar y combinar configuraciones. SF, permite enlaces est'aticos y din'amicos entre componentes, que ayudan a soportar diferentes formas de conexi'on en tiempo de despliegue.\\
\\
El modelo de componentes SF, administra el ciclo de vida atraves de cinco estados: instalado, iniciado, terminado y fallido. Esto permite al motor del SF detectar fallas y reiniciar autom'aticamente re-despliegues de los componentes \cite{11}.

\subsection{Radia}
Herramienta de administraci'on de cambios que utiliza un enfoque basado en modelos \cite{5}. Para cada dispositivo administrado, el administrador define un estado deseado, el cual es mantenido como un modelo en un repositorio central. Nixes, usa seis maquinascalculosmodelos: paquete (configuraci'on, instalaci'on, entradas de registro, binarios, entre otras); mejores pr'acticas; dependencias de software (relaciones con otros componentes de software, sistemas operativos y hardware); infraestructura (servidores, almacenamiento y elementos de red); inventarios de software (software instalado actualmente) e interoperabilidad entre modelos de servicios administrados. 

\subsection{Cobbler}
Cobbler es una plataforma que busca el r'apido despliegue de servidores y en general computadores en una infra-estructura de red, se basa en el modelo de scripts y cuenta con una completa base de simples comandos, que permite hacer despliegues de manera r'apida y con poca intervenci'on humana. Cobbler al igual que SmartFrog es capaz de instalar m'aquinas f'isicas y m'aquinas virtuales. Cobbler, es una peque'na y ligera aplicaci'on, que es extremadamente f'acil de usar para peque'nos o muy grandes despliegues. \cite{6}

\subsection{Amazon EC2}
Amazon EC2 es un API propietario de Amazon y maneja un enfoque manual, que permite desplegar im'agenes de m'aquinas virtuales conocidas como AMI (Amazon Machine Images) \cite{9}, que son las im'agenes que se utilizan en Amazon para arrancar instancias. El concepto de las amis es similar a las m'aquinas virtuales de otros sistemas. B'asicamente est'an compuestas de una serie ficheros de datos que conforman la imagen y luego un xml que especifica ciertos valores necesarios para que sea una imagen v'alida para Amazon que es el image.manifest.xml. 

\subsection{HP Utility Data Center}
HP Utility Data Cente (UDC) es un producto comercial, que se centra en la administraci'on automatizada de servidores de red, usando el concepto de $"$infraestructura programable $"$. Los elementos de hardware, como nodos de servidores, switches, firewalls y elementos de almacenamiento, son cableados en una infraestructura de configuraci'on. El software de administraci'on UDC permite configurar combinaciones de estos componentes en servidores virtuales usando cableados virtuales. \cite{15}

\subsection{Oracle VM Templates}
Oracle VM Templates, es un producto comercial de la empresa Oracle, cuyo objetivo es realizar despliegues rapidos de aplicaciones Oracle y no-Oracle, con base en imagenes de software pre-configuradas manualmente. Cuenta con una interfaz grafica que permite crear y administrar servidores virtuales con facilidad. \cite{14}

\subsection{Chef}
\subsection{vagrant}
\subsection{ansible}


