\chapter{Aprovisionamiento de m'aquinas virtuales}
\label{aprmaqvir}
La computacion en la nube ha sido un punto importane de investigacion en la industria recientemente. Esta puede ser descrita como una nueva clase de computacion en la cual dinamicos y escalables recursos pueden ser provistos sobre internet. Para los usuarios esto es transparente y ellos solo pagan lo que usan de acuerdo a niveles de sliervicio establecidos entre los proveedores de nubes y los usuarios finales. \\
\\
Una de las principales caracteristicas de la computacion en la nube es la virtualizacion, la cual consiste de un numero de maquinas virtuales ejecutandose sobre una o mas maquinas fisicas. \\
\\
La instalacion de una maquina virtual requiere normalmente de la generacion e instalacion de una imagen y la instacion y configuracion de paquetes de software. Estas tareas generalmente son realizadas por tecnicos de los proveedores de la nube. Cuando un usuario de la nube solicita un nuevo servicio o mas capacidad de computo, el administrador selecciona la apropiada imagen para clonar e instalar en los nodos de la nube. Si no hay una imagen apropiada para los requerimientos del cliente se crea y configura una nueva que cumpla con la solicitud. Esta creacion de una nueva imagen puede ser realizada modificando la imagen mas cercada de las ya existentes. En el momento de la creacion optima de la imagen un administrador puede tener dificultades y pregunts como, cual es la mejor configuracio?, cuales paquetes y sus dependencias deberian ser instaladas? como encontrar una imagen que mejor llene las expectativas?\\
\\
Los proveedores de la nube desean cada vez mas automatizar este proceso porque la dependencia entre paquetes de software y la dificultad de mantenimiento agrega tiempo a la creacion de las maquinas virtuales. En otras palabras los proveedores de nube quieren dar mas flexibilidad y agilidad a la hora de satisfaces los requerimientos de los usuarios finales.\\
\\
En el mercado se encuentran soluciones que permiten la interacci'on con ambientes de virtualizaci'on como Xen, KVM, VMWare y VirtualBox.\\
\\
Herramientas como SmartFrog \cite{3} y Cobbler \cite{6} , ofrecen alternativas basadas en scripts y modelos, que dan un r'apido, controlado y autom'atico despliegue de software, en todas las maquinas de una red f'isicas o virtualizadas, permitiendo mejorar los tiempos de instalaci'on de nuevas funcionalidades de forma confiable y segura de la misma forma que ayudan a disminuir el tiempo y el costo de los despliegues de aplicaciones y servicios \cite{4}.\\
\\
A continuaci'on se presenta los diferentes enfoques de aprovisionamiento que existen y posteriormente las herramientas que existen en el mercado que abordan el tema de aprovisionamiento sobre maquinas virtuales.

\section{Herramientas de despliegue actuales}
En esta secci'on, se describir'an herramientas de c'odigo abierto dise'nadas con enfoques de despliegue basados en scripts, lenguajes y modelos. Existen muchas otras herramientas para realizar despliegue las cuales est'an descritas en \cite{12}, la gran mayor'ia de estas herramientas son comerciales y se limitan a configuraci'on de servidores remotos en redes privadas y no abordan el tema de virtualizaci'on.\\
\\
Nixes, SmartFrog, Radia, Cobbler, son ejemplos de los enfoques explicados anteriormente de c'odigo abierto que manejan virtualizaci'on con Xen, KVM y VMWARE. Amazon EC2 y HP Utility Data Center, por el contrario tienen un desarrollo propietario, en donde solo ofrecen el API al p'ublico pero no el c'odigo de la soluci'on como tal y manejan sus propias herramientas de virtualizaci'on.

\subsection{Nixes}
Nixes es una herramienta usada para instalar, mantener, controlar y monitorear aplicaciones en PlanetLab \cite{1}. Nixes consiste de un conjunto de scripts bash, un archivo de configuracion, y un respositorio web, y puede automaticamente resolver las dependencias de paquetes RPM.\\
\\
Para sistemas de peque'na escala, Nixes es f'acil de usar: los usuarios simplement e crean el archivo de configuraci'on para cada aplicaci'on y modifican los scripts a desplegar en los nodos. Pero para grandes y complejos sistemas, Nixes no es efectivo, porque el no provee un mecanismo autom'atico de flujo de trabajo.

\subsection{SmartFrog}
SmartFrog (SF) es un framework para servicios de configuraci'on, descripci'on, despliegue y administraci'on del ciclo de vida. Consiste de un lenguaje declarativo, un motor que corre en los nodos remotos y ejecuta plantillas escritas en el lenguaje de SF y un modelo de componentes \cite{3}. El lenguaje SF soporta encapsularon (que es similar a las clases de python), herencia y composici'on que permite personalizar y combinar configuraciones. SF, permite enlaces est'aticos y din'amicos entre componentes, que ayudan a soportar diferentes formas de conexi'on en tiempo de despliegue.\\
\\
El modelo de componentes SF, administra el ciclo de vida atraves de cinco estados: instalado, iniciado, terminado y fallido. Esto permite al motor del SF detectar fallas y reiniciar autom'aticamente re-despliegues de los componentes \cite{11}.

\subsection{Radia}
Herramienta de administraci'on de cambios que utiliza un enfoque basado en modelos \cite{5}. Para cada dispositivo administrado, el administrador define un estado deseado, el cual es mantenido como un modelo en un repositorio central. Nixes, usa seis maquinascalculosmodelos: paquete (configuraci'on, instalaci'on, entradas de registro, binarios, entre otras); mejores pr'acticas; dependencias de software (relaciones con otros componentes de software, sistemas operativos y hardware); infraestructura (servidores, almacenamiento y elementos de red); inventarios de software (software instalado actualmente) e interoperabilidad entre modelos de servicios administrados. 

\subsection{Cobbler}
Cobbler es una plataforma que busca el r'apido despliegue de servidores y en general computadores en una infra-estructura de red, se basa en el modelo de scripts y cuenta con una completa base de simples comandos, que permite hacer despliegues de manera r'apida y con poca intervenci'on humana. Cobbler al igual que SmartFrog es capaz de instalar m'aquinas f'isicas y m'aquinas virtuales. Cobbler, es una peque'na y ligera aplicaci'on, que es extremadamente f'acil de usar para peque'nos o muy grandes despliegues. \cite{6}

\subsection{Amazon EC2}
Amazon EC2 es un API propietario de Amazon y maneja un enfoque manual, que permite desplegar im'agenes de m'aquinas virtuales conocidas como AMI (Amazon Machine Images) \cite{9}, que son las im'agenes que se utilizan en Amazon para arrancar instancias. El concepto de las amis es similar a las m'aquinas virtuales de otros sistemas. B'asicamente est'an compuestas de una serie ficheros de datos que conforman la imagen y luego un xml que especifica ciertos valores necesarios para que sea una imagen v'alida para Amazon que es el image.manifest.xml. 

\subsection{HP Utility Data Center}
HP Utility Data Cente (UDC) es un producto comercial, que se centra en la administraci'on automatizada de servidores de red, usando el concepto de $"$infraestructura programable $"$. Los elementos de hardware, como nodos de servidores, switches, firewalls y elementos de almacenamiento, son cableados en una infraestructura de configuraci'on. El software de administraci'on UDC permite configurar combinaciones de estos componentes en servidores virtuales usando cableados virtuales. \cite{15}

\subsection{Oracle VM Templates}
Oracle VM Templates, es un producto comercial de la empresa Oracle, cuyo objetivo es realizar despliegues rapidos de aplicaciones Oracle y no-Oracle, con base en imagenes de software pre-configuradas manualmente. Cuenta con una interfaz grafica que permite crear y administrar servidores virtuales con facilidad. \cite{14}

\subsection{Chef}
\subsection{vagrant}
\subsection{ansible}


